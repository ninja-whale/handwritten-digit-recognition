from joblib import load
from urllib import request
from PIL import Image
import numpy as np

model = load('./saved_models/model.joblib')
image_path = './input_images/input_image.jpg'

def prediction(link):
    request.urlretrieve(link, image_path)
    input_file = Image.open(open(image_path, 'rb')).convert('L')
    input_image = input_file.resize((28, 28))
    data = np.array(input_image)
    image_value = data.reshape(784)
    y_pred = model.predict([image_value])
    for i in y_pred:
        str(i)
    return i

#y_pred = prediction('data:image/png;base64,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')
#print(y_pred)